---
layout: default
---

# OpenMKM Installation Guide

OpenMKM requires Cantera, SUNDIALS, Eigen, and Boost libraries. Here are the
steps that can be used to install dependencies and OpenMKM.

## Boost & Eigen
Boost and Eigen are C++ template libraries and often are distributed with Linux.
Refer to distro package manageer documentation on how to obtain them.

## SUNDIALS installation
[SUNDIALS][sundials_page] is a numerical solver suite from Lawrence Livermore
National Lab. OpenMKM is tested with SUNDIALS 3.1.1. For linux, SUNDIALS is
often available from distro package managers. If the required version is not
supplied with distro, one can [download SUNDIALS][sundials_download] and follow
the supplied instructions to install. 

## Cantera installation
To install OpenMKM, Cantera needs to be built from source. Download the source
code from Bharat's fork on GitHub. 
``` bash
git clone https://github.com/mbkumar/cantera.git
```
Checkout the *openmkm* branch which contains modifications to official version
of Cantera to support coverage effects.
``` bash
cd cantera
checkout openmkm
```
Both Cantera and OpenMKM use *scons*, a Python based build tool that is
functionally similar to *cmake*, for build purposes. The following command
could be used to compile Cantera on linux machine.
``` bash
scons build python_package=full f90_interface=y doxygen_docs=yes \
system_eigen=y system_sundials=y sundials_libdir=/usr/lib64 \
python_cmd=~/anaconda3/envs/<env_name>/bin/python \
python_prefix=~/anaconda3/envs/<env_name>/lib/python3.7/site-packages \
extra_inc_dirs="/usr/include/eigen3"
```

A few points on the above Cantera compilation command:
1. System supplied SUNDIALS and Eigen3 software packages are preinstalled.
   SUNDIALS is installed in /usr/lib64 folder, and Eigen3 is installed at
   /usr/include/eigen3. Note that Eigen3 is a header only package. 

2. Use python_cmd and python_prefix to specify the Python command and the
   Python library paths. In the above command, instead of system Python,
   anaconda Python is used. \<env_name\> represents the virtual environment
   name and python3.7 is the version of Python used. 


## OpenMKM installation

1. Download OpenMKM from https://vlachosgroup.gihub.com/openmkm.

2. Go to OpenMKM_ROOT/src folder, where OpenMKM_ROOT is the top level directory
   of OpenMKM package, and edit SConstruct file to specify the dependencies.

    * Edit CPPPATH variable to specify the location of eigen3 headers as well
      as cantera headers.

    * Edit LIBPATH variable to specify the location of sundials and cantera
      libraries.

    * Adjust the CCFLAGS and LINKFLAGS variables to make sure the compiler and
      linker options are consistent with those generated by scons during
      Cantera building stage.

3. Run ```scons```  

[sundials_page]: https://computation.llnl.gov/projects/sundials/
[sundials_download]: https://computation.llnl.gov/projects/sundials/sundials-software